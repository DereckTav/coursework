{"ts":"2025-05-29T22:05:18.604Z","type":"file-open","payload":{"uri":"file:///c%3A/Users/ds3/Documents/coursework/week1/citibike.R","initialContent":"library(tidyverse)\r\nlibrary(lubridate)\r\n\r\n########################################\r\n# READ AND TRANSFORM THE DATA\r\n########################################\r\n\r\n# read one month of data\r\ntrips <- read_csv('week1/201402-citibike-tripdata.csv')\r\n\r\n# replace spaces in column names with underscores\r\nnames(trips) <- gsub(' ', '_', names(trips))\r\n\r\n# convert dates strings to dates\r\n# trips <- mutate(trips, starttime = mdy_hms(starttime), stoptime = mdy_hms(stoptime))\r\n\r\n# recode gender as a factor 0->\"Unknown\", 1->\"Male\", 2->\"Female\"\r\ntrips <- mutate(trips, gender = factor(gender, levels=c(0,1,2), labels = c(\"Unknown\",\"Male\",\"Female\")))\r\n\r\n########################################\r\n# YOUR SOLUTIONS BELOW\r\n########################################\r\n\r\n# count the number of trips (= rows in the data frame)\r\ntrips |> summarize(count = n())\r\n\r\n# find the earliest and latest birth years (see help for max and min to deal with NAs)\r\ntrips |> summarize(min_birth_year = min(as.numeric(birth_year), na.rm=T))\r\n\r\n# use filter and grepl to find all trips that either start or end on broadway\r\ntrips_or_broadway <- trips |> filter(grepl('Broadway', start_station_name) | grepl('Broadway', end_station_name))\r\n\r\n# do the same, but find all trips that both start and end on broadway\r\ntrips_and_broadway <- trips |> filter(grepl('Broadway', start_station_name), grepl('Broadway', end_station_name)) |> view()\r\n\r\n# find all unique station names\r\nstations_unique <- unique(c(select(trips, start_station_name), select(trips, end_station_name)))\r\n\r\n# count the number of trips by gender, the average trip time by gender, and the standard deviation in trip time by gender\r\n# do this all at once, by using summarize() with multiple arguments\r\n\r\ntrips |>\r\n    group_by(gender) |>\r\n     summarize(num_trips = n(),\r\n            mean_trip_length = mean(tripduration, na.rm=TRUE)/60,\r\n            sd_trip_length = sd(tripduration, na.rm=TRUE)/60)\r\n\r\n# find the 10 most frequent station-to-station trips\r\ntrips |> group_by(start_station_name, end_station_name) |> summarize(count = n()) |> arrange(desc(count)) |> head(10)\r\n\r\n\r\n# find the top 3 end stations for trips starting from each start station\r\ntrips |> count(start_station_name, end_station_name) |> group_by(start_station_name) |> arrange(desc(n)) |> slice(1:3)\r\n\r\n\r\n# find the top 3 most common station-to-station trips by gender\r\ntrips |> count(gender, start_station_name, end_station_name) |> group_by(gender) |> arrange(desc(n)) |> slice(1:3)\r\n\r\n\r\n# find the day with the most trips\r\n# tip: first add a column for year/month/day without time of day (use as.Date or floor_date from the lubridate package)\r\ntrips |> select(starttime, stoptime) |> mutate(startday=floor_date(starttime, unit = \"day\"),\r\n                                                 endday=floor_date(stoptime, unit = \"day\"))\r\n\r\n\r\n# compute the average number of trips taken during each of the 24 hours of the day across the entire month\r\n# what time(s) of day tend to be peak hour(s)?\r\n\r\n"}}
{"ts":"2025-05-29T22:05:18.607Z","type":"file-focus","payload":{"uri":"file:///c%3A/Users/ds3/Documents/coursework/week1/citibike.R","focusedAt":"2025-05-29T22:05:18.607Z"}}
{"ts":"2025-05-29T22:10:08.453Z","type":"window-blur","payload":{"uri":"file:///c%3A/Users/ds3/Documents/coursework/week1/citibike.R","blurredAt":"2025-05-29T22:10:08.453Z","focusDurationMs":289846}}
{"ts":"2025-05-29T22:10:32.451Z","type":"window-focus","payload":{"focusedAt":"2025-05-29T22:10:32.451Z"}}
{"ts":"2025-05-29T22:10:36.328Z","type":"window-blur","payload":{"uri":"file:///c%3A/Users/ds3/Documents/coursework/week1/citibike.R","blurredAt":"2025-05-29T22:10:36.328Z","focusDurationMs":3877,"windowFocusDurationMs":3877}}
{"ts":"2025-05-29T22:10:43.716Z","type":"window-focus","payload":{"focusedAt":"2025-05-29T22:10:43.716Z"}}
{"ts":"2025-05-29T22:11:24.225Z","type":"file-save-diff","payload":{"uri":"file:///c%3A/Users/ds3/Documents/coursework/week1/citibike.R","savedAt":"2025-05-29T22:11:24.224Z","diff":[{"count":1,"added":false,"removed":true,"value":"trips <- read_csv('week1/201402-citibike-tripdata.csv')\r\n"},{"count":1,"added":true,"removed":false,"value":"trips <- read_csv('201402-citibike-tripdata.csv')\r\n"},{"count":1,"added":false,"removed":true,"value":"\r\n"},{"count":1,"added":true,"removed":false,"value":"trips |> mutate(hour = hour(starttime)) |> count(hour) |> summarize(avg_trips = mean(n)) |> arrange(desc(avg_trips))\r\n"}]}}
{"ts":"2025-05-29T22:11:24.227Z","type":"file-save","payload":{"uri":"file:///c%3A/Users/ds3/Documents/coursework/week1/citibike.R","savedAt":"2025-05-29T22:11:24.224Z"}}
{"ts":"2025-05-29T22:12:53.713Z","type":"window-focus","payload":{"focusedAt":"2025-05-29T22:12:53.713Z"}}
{"ts":"2025-05-29T22:13:01.543Z","type":"window-focus","payload":{"focusedAt":"2025-05-29T22:13:01.543Z"}}
{"ts":"2025-05-29T22:17:04.945Z","type":"file-save-diff","payload":{"uri":"file:///c%3A/Users/ds3/Documents/coursework/week1/citibike.R","savedAt":"2025-05-29T22:17:04.944Z","diff":[{"count":1,"added":false,"removed":true,"value":"trips |> mutate(hour = hour(starttime)) |> count(hour) |> summarize(avg_trips = mean(n)) |> arrange(desc(avg_trips))\r\n"},{"count":1,"added":true,"removed":false,"value":"trips |> mutate(hour = hour(starttime)) |> count(hour) |> group_by(hour) |> summarize(avg_trips = mean(n)/28) |> arrange(desc(avg_trips))\r\n"}]}}
{"ts":"2025-05-29T22:17:04.946Z","type":"file-save","payload":{"uri":"file:///c%3A/Users/ds3/Documents/coursework/week1/citibike.R","savedAt":"2025-05-29T22:17:04.944Z"}}
{"ts":"2025-05-29T22:18:21.542Z","type":"file-save","payload":{"uri":"file:///c%3A/Users/ds3/Documents/coursework/week1/citibike.R","savedAt":"2025-05-29T22:18:21.540Z"}}
{"ts":"2025-05-29T22:18:21.541Z","type":"file-save-diff","payload":{"uri":"file:///c%3A/Users/ds3/Documents/coursework/week1/citibike.R","savedAt":"2025-05-29T22:18:21.540Z","diff":[{"count":1,"added":false,"removed":true,"value":"trips |> mutate(hour = hour(starttime)) |> count(hour) |> group_by(hour) |> summarize(avg_trips = mean(n)/28) |> arrange(desc(avg_trips))\r\n"},{"count":1,"added":true,"removed":false,"value":"trips |> mutate(hour = hour(starttime), month = month(starttime)) |> count(hour, month) |> group_by(hour) |> summarize(avg_trips = mean(n)/days_in_month(month)) |> arrange(desc(avg_trips))\r\n"}]}}
{"ts":"2025-05-29T22:18:33.473Z","type":"window-blur","payload":{"uri":"file:///c%3A/Users/ds3/Documents/coursework/week1/citibike.R","blurredAt":"2025-05-29T22:18:33.473Z","focusDurationMs":331930,"windowFocusDurationMs":331930}}
{"ts":"2025-05-29T22:18:55.862Z","type":"window-focus","payload":{"focusedAt":"2025-05-29T22:18:55.862Z"}}
